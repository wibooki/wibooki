{% trans_default_domain 'FOSUserBundle' %}

{% for flash_message in app.session.flashbag.get('success') %}
    <div class="alert alert-success">
        {{ flash_message }}
    </div>
{% endfor %}
<div class="col-sm-12">
    <ul class="nav nav-pills profile-nav">
        <li>
            <a href="{{ path('fos_user_profile_edit') }}">Configuración</a>
        </li>
        <li class="active">
            <a href="#">Cambiar contraseña</a>
        </li>
    </ul>
    <br/>
</div>
<br/>
<div class="jumbotron vertical-center">
    <div class="container text-center">
        <div class="row">
            <div class="col-sm-12 register-container">
                <div class="center-block wide-box-form">
                    <div class="wide-container-title">
                        Cambiar contraseña
                    </div>
                    <div class="panel panel-default panel-blank">
                        <div class="panel-body">
                            {{ form_start(form, { 'action': path('fos_user_change_password'), 'attr': { 'class': 'fos_user_change_password' } }) }}
                            <input type="hidden" name="_csrf_token" value="{{ csrf_token('intention') }}">
                            <div class="input-field col s12 {% if form_errors(form.current_password) %}has-error{% endif %}">
                                {{ form_widget(form.current_password, { 'attr': {'class':'form-control', 'placeholder': 'Contraseña actual'}}) }}
                            </div>
                            <div class="input-field col s12 {% if form_errors(form.plainPassword.first) %}has-error{% endif %}">
                                {{ form_widget(form.plainPassword.first, { 'attr': {'class':'form-control', 'placeholder': 'Nueva contraseña'}}) }}
                            </div>
                            <div class="input-field col s12 {% if form_errors(form.plainPassword.second) %}has-error{% endif %}">
                                {{ form_widget(form.plainPassword.second, { 'attr': {'class':'form-control', 'placeholder': 'Verificar contraseña'}}) }}
                            </div>
                            <br/>
                            <div align="center" class="button-wrap">
                                <button class="btn-m btn-primary" type="submit" name="action">
                                    {{ 'change_password.submit'|trans({}, 'FOSUserBundle') }}
                                </button>
                            </div>
                            {{ form_end(form) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="row">
    <div class="col-sm-12 register-error">
        {{ form_errors(form.current_password) }}
        {{ form_errors(form.plainPassword.first) }}
        {{ form_errors(form.plainPassword.second) }}
    </div>
</div>